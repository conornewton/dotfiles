set nocompatible " fuck off vi

source ~/.vim/bundle/vim-pathogen/autoload/pathogen.vim
filetype plugin indent on

filetype on

syntax on

set number                  "show line number
set cursorline

"shows trailing spaces as dots
set list
" not working properly
set listchars=tab:≫\ ,trail:·

set tabstop=4               "tab stuff
set shiftwidth=4
set expandtab
set softtabstop=4

"escape insert mode
inoremap ;; <ESC>

"F8 toggles between converting tabs to spaces
nnoremap <F8> :setlocal expandtab!<CR>
"F7 toggles line wraping
nnoremap <F7> :setlocal wrap!<CR>

"do not convert tabs to spaces in make files
autocmd FileType make setlocal noexpandtab

set autoindent
set smartindent

set hlsearch                "highlight search items
set incsearch               "show maches as you search

set noswapfile

"C L-R changes tab
nnoremap <C-J> :tabprevious<CR>
nnoremap <C-;> :tabnext<CR>

"use natural keys for movement
noremap ; l
noremap l k
noremap k j
noremap j h

"Syntastic
set statusline+=%#warningmsg#
set statusline+=%{SyntasticStatuslineFlag()}
set statusline+=%*

let g:syntastic_always_populate_loc_list = 1
let g:syntastic_auto_loc_list = 1
let g:syntastic_check_on_open = 1
let g:syntastic_check_on_wq = 0

"hides gui menus
set guioptions-=m
set guioptions-=T
set guioptions-=R
set guioptions-=r
set guioptions-=L

nnoremap <F9> :SyntasticToggleMode <CR>

" Disable Arrow keys in Escape mode
map <up> <nop>
map <down> <nop>
map <left> <nop>
map <right> <nop>

" Disable Arrow keys in Insert mode
imap <up> <nop>
imap <down> <nop>
imap <left> <nop>
imap <right> <nop>

" fixes markdown with latex

function! MathAndLiquid()
    "" Define certain regions
    " Block math. Look for "$$[anything]$$"
    syn region math start=/\$\$/ end=/\$\$/
    " inline math. Look for "$[not $][anything]$"
    syn match math_block '\$[^$].\{-}\$'

    " Liquid single line. Look for "{%[anything]%}"
    syn match liquid '{%.*%}'
    " Liquid multiline. Look for "{%[anything]%}[anything]{%[anything]%}"
    syn region highlight_block start='{% highlight .*%}' end='{%.*%}'
    " Fenced code blocks, used in GitHub Flavored Markdown (GFM)
    syn region highlight_block start='```' end='```'

    "" Actually highlight those regions.
    hi link math Statement
    hi link liquid Statement
    hi link highlight_block Function
    hi link math_block Function
endfunction

" Call everytime we open a Markdown file
autocmd BufRead,BufNewFile,BufEnter *.md,*.markdown call MathAndLiquid()
